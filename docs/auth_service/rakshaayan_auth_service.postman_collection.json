{
  "info": {
    "_postman_id": "rakshaayan-auth-service-collection",
    "name": "Rakshaayan Auth Service",
    "description": "# Rakshaayan Auth Service API Collection\n\n## How to Use\n- **Register** a user first.\n- **Send verification email** and **verify email** (required before login).\n- **Login** to receive authentication cookies (access_token, refresh_token).\n- Use authenticated endpoints (profile, update, change password, etc.) after login.\n- For admin endpoints, login as an admin user.\n- Use the provided example bodies for each request.\n- CSRF cookies are set automatically by the backend.\n\n## Special Notes\n- Email verification is required before login.\n- Registration strictly enforces uniqueness for username, email, and phone number. Duplicate registration will return a 400 error.\n- All user types and edge/negative cases are covered and tested in the backend.\n- Use `withCredentials: true` in frontend or allow cookies in Postman for authenticated requests.\n- For password reset, request a password reset OTP, then reset password.\n- Admin endpoints require an admin user.\n\n## Endpoints\n- Register, Login, Logout\n- Profile (get/update), Change Password\n- OTP (request/verify), Password Reset\n- Email Verification (send/verify)\n- User Roles, Assign Role, Audit Logs\n- Admin User Management (list/search/update/deactivate)\n- **NEW:** Admin Role Management, System Configuration, System Health, Advanced User Management\n\n---\n\nFor more details, see the README in the repository.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Register",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"username\": \"john\",\n  \"email\": \"john@email.com\",\n  \"phone_number\": \"+919876543210\",\n  \"password\": \"StrongPass123!\",\n  \"user_type\": \"patient\"\n}"
        },
        "url": {
          "raw": "http://localhost:8001/register/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["register", ""]
        }
      },
      "description": "Register a new user. Required fields: username, email, phone_number, password, user_type.\n\n**Note:** Registration strictly enforces uniqueness for username, email, and phone number. Attempts to register with a duplicate username, email, or phone will return a 400 error with a clear message."
    },
    {
      "name": "Login (requires email verification)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"username\": \"john\",\n  \"password\": \"StrongPass123!\"\n}"
        },
        "url": {
          "raw": "http://localhost:8001/login/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["login", ""]
        }
      },
      "description": "Login with username and password. Email must be verified first. Sets authentication cookies."
    },
    {
      "name": "Send Verification Email",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "url": {
          "raw": "http://localhost:8001/email/send-verification/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["email", "send-verification", ""]
        }
      },
      "description": "Send a verification email to the currently authenticated user."
    },
    {
      "name": "Verify Email",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"john@email.com\",\n  \"token\": \"<token-from-email>\"\n}"
        },
        "url": {
          "raw": "http://localhost:8001/email/verify/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["email", "verify", ""]
        }
      },
      "description": "Verify a user's email using the token sent to their email address."
    },
    {
      "name": "Request OTP (Phone)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"phone_number\": \"+919876543210\"\n}"
        },
        "url": {
          "raw": "http://localhost:8001/request-otp/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["request-otp", ""]
        }
      },
      "description": "Request an OTP for phone number verification."
    },
    {
      "name": "Verify OTP (Phone)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"phone_number\": \"+919876543210\",\n  \"otp_code\": \"123456\"\n}"
        },
        "url": {
          "raw": "http://localhost:8001/verify-otp/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["verify-otp", ""]
        }
      },
      "description": "Verify the OTP sent to the phone number."
    },
    {
      "name": "Request Password Reset OTP",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"phone_number\": \"+919876543210\"\n}"
        },
        "url": {
          "raw": "http://localhost:8001/request-password-reset-otp/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["request-password-reset-otp", ""]
        }
      },
      "description": "Request an OTP for password reset."
    },
    {
      "name": "Reset Password",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"phone_number\": \"+919876543210\",\n  \"otp_code\": \"123456\",\n  \"new_password\": \"NewPass123!\"\n}"
        },
        "url": {
          "raw": "http://localhost:8001/reset-password/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["reset-password", ""]
        }
      },
      "description": "Reset password using OTP."
    },
    {
      "name": "Profile (Get)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8001/profile/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["profile", ""]
        }
      },
      "description": "Get the profile of the authenticated user."
    },
    {
      "name": "Profile (Update)",
      "request": {
        "method": "PUT",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"organization_name\": \"Updated Organization\",\n  \"designation\": \"Updated Designation\"\n}"
        },
        "url": {
          "raw": "http://localhost:8001/profile/update/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["profile", "update", ""]
        }
      },
      "description": "Update the profile of the authenticated user."
    },
    {
      "name": "Change Password",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"old_password\": \"StrongPass123!\",\n  \"new_password\": \"NewPass123!\"\n}"
        },
        "url": {
          "raw": "http://localhost:8001/change-password/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["change-password", ""]
        }
      },
      "description": "Change the password of the authenticated user."
    },
    {
      "name": "User Roles",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8001/user-roles/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["user-roles", ""]
        }
      },
      "description": "Get the roles assigned to the authenticated user."
    },
    {
      "name": "Assign Role",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"user_id\": 2,\n  \"role_id\": 1\n}"
        },
        "url": {
          "raw": "http://localhost:8001/assign-role/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["assign-role", ""]
        }
      },
      "description": "Assign a role to a user. Requires admin authentication."
    },
    {
      "name": "Audit Logs",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8001/audit-logs/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["audit-logs", ""]
        }
      },
      "description": "Get audit logs for the authenticated user."
    },
    {
      "name": "Admin: List/Search Users",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8001/admin/users/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "users", ""]
        }
      },
      "description": "List or search users. Requires admin authentication."
    },
    {
      "name": "Admin: Update User",
      "request": {
        "method": "PATCH",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"user_type\": \"manufacturer\"\n}"
        },
        "url": {
          "raw": "http://localhost:8001/admin/users/2/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "users", "2", ""]
        }
      },
      "description": "Update a user's details. Requires admin authentication."
    },
    {
      "name": "Admin: Deactivate User",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "http://localhost:8001/admin/users/2/deactivate/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "users", "2", "deactivate", ""]
        }
      },
      "description": "Deactivate a user. Requires admin authentication."
    },
    {
      "name": "Admin: Create User",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"username\": \"newuser\",\n  \"email\": \"newuser@email.com\",\n  \"phone_number\": \"+919876543211\",\n  \"password\": \"StrongPass123!\",\n  \"user_type\": \"hospital\",\n  \"organization_name\": \"City Hospital\",\n  \"designation\": \"Doctor\",\n  \"address\": \"123 Medical Street\"\n}"
        },
        "url": {
          "raw": "http://localhost:8001/admin/users/create/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "users", "create", ""]
        }
      },
      "description": "Create a new user. Requires admin authentication."
    },
    {
      "name": "Admin: Activate User",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "url": {
          "raw": "http://localhost:8001/admin/users/2/activate/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "users", "2", "activate", ""]
        }
      },
      "description": "Activate a deactivated user. Requires admin authentication."
    },
    {
      "name": "Admin: List Roles",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8001/admin/roles/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "roles", ""]
        }
      },
      "description": "List all roles. Requires admin authentication."
    },
    {
      "name": "Admin: Create Role",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"Senior Doctor\",\n  \"description\": \"Senior medical staff role\",\n  \"permissions\": [\"view_patients\", \"edit_reports\", \"approve_devices\"]\n}"
        },
        "url": {
          "raw": "http://localhost:8001/admin/roles/create/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "roles", "create", ""]
        }
      },
      "description": "Create a new role. Requires admin authentication."
    },
    {
      "name": "Admin: Update Role",
      "request": {
        "method": "PUT",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"Senior Doctor Updated\",\n  \"description\": \"Updated senior medical staff role\",\n  \"permissions\": [\"view_patients\", \"edit_reports\", \"approve_devices\", \"manage_users\"]\n}"
        },
        "url": {
          "raw": "http://localhost:8001/admin/roles/1/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "roles", "1", ""]
        }
      },
      "description": "Update a role. Requires admin authentication."
    },
    {
      "name": "Admin: Delete Role",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "http://localhost:8001/admin/roles/1/delete/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "roles", "1", "delete", ""]
        }
      },
      "description": "Delete a role. Requires admin authentication."
    },
    {
      "name": "Admin: Get Audit Logs",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8001/admin/audit-logs/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "audit-logs", ""]
        }
      },
      "description": "Get all audit logs with filtering options. Requires admin authentication."
    },
    {
      "name": "Admin: Export Audit Logs",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8001/admin/audit-logs/export/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "audit-logs", "export", ""]
        }
      },
      "description": "Export audit logs to CSV. Requires admin authentication."
    },
    {
      "name": "Admin: Get System Config",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8001/admin/system/config/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "system", "config", ""]
        }
      },
      "description": "Get system configuration. Requires admin authentication."
    },
    {
      "name": "Admin: Update System Config",
      "request": {
        "method": "PUT",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"site_name\": \"NIMHANS Medical Device Monitoring\",\n  \"maintenance_mode\": false,\n  \"registration_enabled\": true,\n  \"email_notifications\": true,\n  \"backup_frequency\": \"daily\",\n  \"session_timeout\": 30,\n  \"max_login_attempts\": 5,\n  \"password_policy\": {\n    \"min_length\": 8,\n    \"require_uppercase\": true,\n    \"require_numbers\": true,\n    \"require_special\": true\n  }\n}"
        },
        "url": {
          "raw": "http://localhost:8001/admin/system/config/update/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "system", "config", "update", ""]
        }
      },
      "description": "Update system configuration. Requires admin authentication."
    },
    {
      "name": "Admin: Get System Health",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8001/admin/system/health/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "system", "health", ""]
        }
      },
      "description": "Get system health metrics. Requires admin authentication."
    },
    {
      "name": "Admin: System Backup",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "url": {
          "raw": "http://localhost:8001/admin/system/backup/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "system", "backup", ""]
        }
      },
      "description": "Initiate manual system backup. Requires admin authentication."
    },
    {
      "name": "Admin: System Restart",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "url": {
          "raw": "http://localhost:8001/admin/system/restart/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "system", "restart", ""]
        }
      },
      "description": "Initiate system restart. Requires admin authentication."
    },
    {
      "name": "Admin: Get User Roles",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8001/admin/users/2/roles/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "users", "2", "roles", ""]
        }
      },
      "description": "Get roles assigned to a specific user. Requires admin authentication."
    },
    {
      "name": "Admin: Assign User Role",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"role_id\": 1\n}"
        },
        "url": {
          "raw": "http://localhost:8001/admin/users/2/roles/assign/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "users", "2", "roles", "assign", ""]
        }
      },
      "description": "Assign a role to a specific user. Requires admin authentication."
    },
    {
      "name": "Admin: Remove User Role",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "http://localhost:8001/admin/users/2/roles/1/remove/",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8001",
          "path": ["admin", "users", "2", "roles", "1", "remove", ""]
        }
      },
      "description": "Remove a role from a specific user. Requires admin authentication."
    }
  ]
} 